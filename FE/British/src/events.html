<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primal MMA | Unleash Your Inner Fighter</title>
    <link rel="stylesheet" href="../css/new_style.css">
    <style>
        body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 20px;
          background-color: #f5f5f5;
        }
    
        .event-container {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
        }
    
        .event-card {
          width: 300px;
          background-color: #000;
          border-radius: 8px;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
          margin: 20px;
          padding: 20px;
          transition: transform 0.3s ease;
        }
    
        .event-card:hover {
          transform: translateY(-5px);
          cursor: pointer;
        }
    
        .event-title {
          font-size: 20px;
          font-weight: bold;
          margin-bottom: 10px;
          color: #f5f5f5;
        }
    
        .event-description {
          color: hsl(0, 54%, 97%);
          margin-bottom: 10px;
        }
    
        .event-details {
          margin-bottom: 10px;
          color: #f5f5f5;
        }
    
        .event-details p {
          margin: 5px 0;
        }
    
        .event-details strong {
          font-weight: bold;
        }
    
        .event-fees {
          font-size: 18px;
          font-weight: bold;
          color: #4caf50;
        }

        /* Modal Styles */
        .modal {
          display: none;
          position: fixed;
          z-index: 1;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
          background-color: #fff;
          margin: 15% auto;
          padding: 20px;
          border: 1px solid #888;
          width: 400px;
          text-align: center;
        }

        .modal-content img {
          width: 150px;
          height: 150px;
          margin-bottom: 20px;
        }

        .modal-content input[type="file"] {
          margin-bottom: 10px;
        }

        .modal-close {
          color: #aaa;
          float: right;
          font-size: 28px;
          font-weight: bold;
        }

        .modal-close:hover,
        .modal-close:focus {
          color: #000;
          text-decoration: none;
          cursor: pointer;
        }

        .modal-submit {
          background-color: #4caf50;
          color: white;
          padding: 10px 20px;
          border: none;
          cursor: pointer;
        }
      </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="../img/primal.png" alt="PRIMAL MMA">
        </div>
        <nav>
            <ul id="nav-links">
                <li class="dropdown">
                    <a href="#events" class="dropbtn">Fight Cards</a>
                    <div class="dropdown-content">
                        <a href="boxing.html">Boxing Showdowns</a>
                        <a href="kickboxing.html">Kickboxing Battles</a>
                        <a href="muaythai.html">Muay Thai Warriors</a>
                        <a href="grappling.html">Grappling Tournaments</a>
                        <a href="mma.html">MMA Spectaculars</a>
                    </div>
                </li>
                
                <li><a href="#rankings">Rankings</a></li>
                <li><a href="http://127.0.0.1:5500/FE/British/src/dashboard.html#">Home</a></li>
            </ul>
            <button id="nav-toggle">â˜°</button>
        </nav>
    </header>

    <div class="event-container" id="eventContainer"></div>

    <!-- Modal for Event Details -->
    <div id="eventModal" class="modal">
      <div class="modal-content">
        <span class="modal-close">&times;</span>
        <h2>Event QR Code</h2>
        <img id="qrCode" src="../img/qr_placeholder.png" alt="QR Code">
        <form id="uploadForm">
          <input type="file" id="fileUpload">
          <br>
          <button type="submit" class="modal-submit">Submit</button>
        </form>
      </div>
    </div>

    <script>
      const apiUrl = "http://127.0.0.1:8000/api/events/";
      const eventContainer = document.getElementById("eventContainer");
      const modal = document.getElementById("eventModal");
      const closeModal = document.querySelector(".modal-close");
      
      // Fetch events from API and display them
      fetch(apiUrl)
        .then(response => response.json())
        .then(events => {
          events.forEach(event => {
            const eventCard = document.createElement("div");
            eventCard.classList.add("event-card");

            const eventTitle = document.createElement("h2");
            eventTitle.classList.add("event-title");
            eventTitle.textContent = event.event_name;
            eventCard.appendChild(eventTitle);

            const eventDescription = document.createElement("p");
            eventDescription.classList.add("event-description");
            eventDescription.textContent = event.description;
            eventCard.appendChild(eventDescription);

            const eventDetails = document.createElement("div");
            eventDetails.classList.add("event-details");
            eventDetails.innerHTML = `
              <p><strong>Event Type:</strong> ${event.event_type.type}</p>
              <p><strong>Date:</strong> ${event.date}</p>
              <p><strong>Time:</strong> ${event.time}</p>
              <p><strong>Location:</strong> ${event.location}</p>
              <p><strong>Max Participants:</strong> ${event.max_participants}</p>
              <p><strong>Organizer:</strong> ${event.organizer_name}</p>
              <button class="register-btn">Click here to register for the event</button>
            `;
            eventCard.appendChild(eventDetails);

            const eventFees = document.createElement("p");
            eventFees.classList.add("event-fees");
            eventFees.textContent = `Fees: $${event.fees}`;
            eventCard.appendChild(eventFees);

            eventCard.addEventListener("click", () => {
              modal.style.display = "block";
              // Optionally, set QR code dynamically here using event data
            });

            eventContainer.appendChild(eventCard);
          });
        })
        .catch(error => {
          console.error("Error fetching events:", error);
        });

      // Close modal on clicking "X" button
      closeModal.addEventListener("click", () => {
        modal.style.display = "none";
      });

      // Close modal when clicking outside of the modal content
      window.addEventListener("click", (event) => {
        if (event.target === modal) {
          modal.style.display = "none";
        }
      });

      // Handle form submission (file upload)
      document.getElementById("uploadForm").addEventListener("submit", (event) => {
        event.preventDefault();
        const fileInput = document.getElementById("fileUpload");
        const file = fileInput.files[0];
        if (file) {
          console.log("File uploaded:", file.name);
          // Handle file upload to server here
        }
      });
    </script>
</body>
</html>
